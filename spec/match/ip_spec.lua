describe("match.ip", function()
  local t, ip
  setup(function()
    t = require "t"
    ip = t.match.ip
  end)
  it("positive", function()
    assert.equal('8.8.8.8', ip('8.8.8.8'))
    assert.equal('0.0.0.0', ip('0.0.0.0'))
    assert.equal('255.255.255.255', ip('255.255.255.255'))
    assert.equal('1.2.3.4', ip('1.2.3.4 '))
    assert.equal('8.8.8.8', ip('8.8.8.8 '))
    assert.equal('0.0.0.0', ip('0.0.0.0 '))
    assert.equal('255.255.255.255', ip('255.255.255.255 '))
    assert.equal('1.2.3.4', ip('1.2.3.4 '))

    assert.equal('8.8.8.8', ip('8.8.8.8/32 '))
    assert.equal('0.0.0.0', ip('0.0.0.0/32 '))
    assert.equal('255.255.255.255', ip(' 255.255.255.255/32'))
    assert.equal('1.2.3.4', ip(' 1.2.3.4/32'))
  end)
  it("negative", function()
    assert.is_nil(ip('8.8.8.8/31'))
    assert.is_nil(ip('0.0.0.0/'))
    assert.is_nil(ip('255.255.255.255/333'))
    assert.is_nil(ip('1.2.3.4/322'))

    assert.is_nil(ip('-1'))
    assert.is_nil(ip('255+1'))
    assert.is_nil(ip('0.0.0.0.0'))
    assert.is_nil(ip('0.0.0.-1'))
    assert.is_nil(ip('-1.0.0.0'))
    assert.is_nil(ip('0.0.0.256'))
    assert.is_nil(ip('0.0.256.0'))
    assert.is_nil(ip('0.256.0.0'))
    assert.is_nil(ip('256.0.0.0'))
    assert.is_nil(ip('255.255.255.256'))
    assert.is_nil(ip(true))
    assert.is_nil(ip(false))
    assert.is_nil(ip(3))
    assert.is_nil(ip(0))
    assert.is_nil(ip({}))
    assert.is_nil(ip({1}))
    assert.is_nil(ip({'1.2.3.4'}))
  end)
  it("nil", function()
    assert.is_nil(ip())
    assert.is_nil(ip(nil))
  end)
end)